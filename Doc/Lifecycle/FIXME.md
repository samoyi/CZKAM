# FIXME List

## 列表
优先级 | 内容 | 不修改的影响 | 最晚修改期限 | 修改完成日期 | 原因、解决方法或备注
--|--|--|--|--|--
维护 | 左侧目录数据中只能控制隐藏一级分类，不能隐藏二级分类 |需要直接删除目录数据中的二级分类|||
维护 | 左侧目录数据中将某个一级分类的`display`设为`false`，如果该一级分类包含默认路由内容，则虽然左侧目录没有该一级分类，但右侧默认内容还是之前的 |每次`display`设为`false`后都要修改默认路由||| 详见`Doc\data_format.md`
效率 | .htaccess中设置的缓存没效果。有延迟？ |客户上传的照片不能设置缓存||| Nginx不能使用/不能直接使用 .htaccess
维护 | Vue.js每一个实例就是一个全局变量？ | 增加错误风险 | -- | 2018.3 | 使用Vue-cli重构网站
维护 | 将通用标题改成静态模板 | 增加维护成本 | 上线前 | 6.12 |
效率 | 压缩css、js | | 上线前 | 上线前 |
效率 | js转es5 | | 上线前 | 6.20|
维护 | 弄清楚Vue的驼峰和横线写法 | 维护易出错 | 上线前 | 已完成 |
维护 | 不复用的样式不要定义常量或变量 | 增加维护成本 | 上线前 | 6.22|
维护 | 完善注释 | | 最晚在上线后一周之内 | 2018.3 | 网站重构时添加的注释
维护 | 崔振宽作品和画廊用的代码是一样的，如何合并 | | | 2018.3 | 使用Vue-cli重构网站
维护 | 首页的数据是独立的 | | | 已完成 | 后端使用公共数据，前端请求独立的首页数据
维护 | 首页轮播图改成Vue.js版的 ||| 2018.3 | 使用Vue-cli重构网站
维护 | 所有的类展览没有使用单一组件，而是三个组件拼在一起 | | | 2018.3 | 使用Vue-cli重构网站
维护 | 有没有更好的方法解决百度地图加载的问题，随后通过Vue.js绑定的方法 ||| 2018.3 | 使用Vue-cli重构网站
错误 | 即使带着其他版块hash值进入网页，也会跳到第一个版块 | | 上线前 | 6.20|
维护 | 点击目录显示版块的逻辑是循环列表，考虑改成点击目录后更新一级标题和二级标题的状态数据。例如点击了第一大类第二个小类的标题，则更新两个数据为0 1，根据这两个数据显示对应的DOM。并总结这两种思路各自的优缺点。 ||| 2018.3 | 使用Vue-router
维护 | 点击列表下面的页码后页面回到顶部的代码没有使用统一的一个 | | | 7.29|
维护 | 文章封面图移到自己的服务器 |||7.29|
效率 | 无法直接跳转到详情页显示 ||| 6.20 |
维护 | 通知轮播栏的分页器没有根据通知数目动态变化，轮播也侦测不到只有一个通知的情况 |||7.29|
效率 | 修改调试完成后将vue.js换成如下地址https://cdn.bootcss.com/vue/2.3.4/vue.min.js |||上线前|
效率 | 考虑合并所有的css文件。首页加载单独的css，首页onload后加载其他页面合并的css |||6.22 | 首页以外的其他页面都只引用同一个css文件。不过发现其他页面加载时候仍然会加载该CSS文件，但是大小会很小
效率 | 在阿里云上给图片设置的max-age，有些有效有些无效 ||| 6.21 | 看起来有些延迟，当天晚上再看就都有了
效率 | 展示画作的图片因为是背景图，所以在外层隐藏的情况下无法预加载 ||22上午| 6.22 | 崔振宽艺术和馆藏页面进去后，onload之后会分批加载画作图片
维护 | 客户基本定稿后，记录全局变量 ||| 2018.3 |
视觉 | 侧边栏主标题的数据尚未加载的时候不要渲染，否则会瞬间看到Vue.js的花括号 ||| 6.22 | 通过 v-text 和 v-cloak
维护 | 有三个公告内容json文件，而且首页公告还是用了独立的数据，并且公告的分页器不是动态的 |||7.29| 统一成了一个来源
错误 | 出现了：加载`ajax.php`之后，再添加一篇文章详情json后，试图加载该json时会出现json数据错误。复制重命名一个`ajax1.php`并取消里面的`max-age`后请求该php文件恢复正常。但是感觉和`max-age`也没关系啊 |||正式上线|正式上线后不再使用该文件，但上述错误原因未知
维护 | 多次出现的 let oContent = document.querySelector(".content"); 似乎没用 ||| 2018.3 | 使用Vue-cli重构网站
维护 | swiper如果放入vue组件里，swiper的初始化代码要等组件mounted之后且用setTimeout推到队尾才行 ||| 2018.3 | 使用Vue-cli重构网站
维护 | 整理一共有几类数据结构 ||| 2018.3 | 使用Vue-cli重构网站
维护 | 设置画作图片防盗链 | 增加盗链风险 || 8.16 | 阿里云存储对整个bucket进行设置



## 该文档使用说明
### 使用方法
 * 从项目一开始就建立独立的 FIXME List ，每一项 FIXME 都进行记录
 * 在正式上线前检查 FIXME List，保证上面没有影响使用的条目。
 * 修改完成日期为空的表示尚未修复。
 * 修改后的条目不能删除，只能标记完成。同时将该条目移到列表末端。保证列表前面都是未修
 复的条目。


### FIXME类型
* 错误：功能无法正常使用
* 安全：存在安全漏洞
* 视觉：影响视觉体验，但不影响功能，同时不明显影响使用效率
* 效率：产品设计逻辑不良、视觉设计混乱以及程序效率低下导致的用户使用效率降低
* 维护：增加维护成本,增加错误风险
